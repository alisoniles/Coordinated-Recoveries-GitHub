\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={CCM\_reduce\_revised},
            pdfauthor={Kurt Ingeman},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{{#1}}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\ImportTok}[1]{{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{{#1}}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{{#1}}}}
\newcommand{\BuiltInTok}[1]{{#1}}
\newcommand{\ExtensionTok}[1]{{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{{#1}}}
\newcommand{\RegionMarkerTok}[1]{{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{{#1}}}}
\newcommand{\NormalTok}[1]{{#1}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{CCM\_reduce\_revised}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Kurt Ingeman}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{6/5/2021}


\begin{document}
\maketitle

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{rm}\NormalTok{(}\DataTypeTok{list =} \KeywordTok{ls}\NormalTok{())}

\KeywordTok{library}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'dplyr'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:stats':
## 
##     filter, lag
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(here)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## here() starts at /Users/kurtingeman/github/CORE_rand
\end{verbatim}

\subsection{Read in 99 data and
rename}\label{read-in-99-data-and-rename}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\KeywordTok{here}\NormalTok{(}\StringTok{"CCM_twin_99.csv"}\NormalTok{))}
\CommentTok{# 258 vars}

\CommentTok{# ensure that max will work when all values negative}
\NormalTok{df[}\KeywordTok{is.na}\NormalTok{(df)] <-}\StringTok{ }\NormalTok{-}\DecValTok{99}

\CommentTok{# split df into the rec4 and rec5 values}
\NormalTok{df4 <-}\StringTok{ }\NormalTok{df %>%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(}\DecValTok{1}\NormalTok{:}\DecValTok{8}\NormalTok{) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{rename}\NormalTok{(}
    \DataTypeTok{ESU =} \NormalTok{ESU_rec4n,}
    \DataTypeTok{IMN =} \NormalTok{Imnaha_rec4n,}
    \DataTypeTok{MFS =} \NormalTok{Middle.Fork.Salmon_rec4n, }
    \DataTypeTok{UPS =} \NormalTok{Upper.Salmon_rec4n}
  \NormalTok{)}

\NormalTok{df5 <-}\StringTok{ }\NormalTok{df %>%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(}\DecValTok{1}\NormalTok{:}\DecValTok{4}\NormalTok{, }\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{rename}\NormalTok{(}
    \DataTypeTok{ESU =} \NormalTok{ESU_rec5n,}
    \DataTypeTok{IMN =} \NormalTok{Imnaha_rec5n,}
    \DataTypeTok{MFS =} \NormalTok{Middle.Fork.Salmon_rec5n, }
    \DataTypeTok{UPS =} \NormalTok{Upper.Salmon_rec5n}
  \NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{Rec4 -- Create df with only those variables x offset that
represent the highest rho for at least one of the spatial components
(ESU or one of the three
MPGs)}\label{rec4-create-df-with-only-those-variables-x-offset-that-represent-the-highest-rho-for-at-least-one-of-the-spatial-components-esu-or-one-of-the-three-mpgs}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df4_cat <-}\StringTok{ }\NormalTok{df4 %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(cat) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_ESU =} \KeywordTok{case_when}\NormalTok{(ESU >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{ESU ==}\StringTok{ }\KeywordTok{max}\NormalTok{(ESU) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_MFS =} \KeywordTok{case_when}\NormalTok{(MFS >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{MFS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(MFS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_IMN =} \KeywordTok{case_when}\NormalTok{(IMN >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{IMN ==}\StringTok{ }\KeywordTok{max}\NormalTok{(IMN) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_UPS =} \KeywordTok{case_when}\NormalTok{(UPS>}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{UPS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(UPS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{ }\KeywordTok{rowwise}\NormalTok{() %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sum_cat =} \KeywordTok{sum}\NormalTok{(cat_ESU, cat_MFS, cat_IMN, cat_UPS, }\DataTypeTok{na.rm =} \NormalTok{T))}

\CommentTok{#rec4 variables that represents the highest uRho in at least one full category: }
\KeywordTok{colSums}\NormalTok{(df4_cat[,}\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## cat_ESU cat_MFS cat_IMN cat_UPS 
##      10       9       6       6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#top_cat_ESU top_cat_MFS top_cat_IMN top_cat_UPS }
\CommentTok{#         10           9           6           6 }


\NormalTok{rec4_top_cat <-}\StringTok{ }\NormalTok{df4_cat %>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(sum_cat >}\StringTok{ }\DecValTok{0}\NormalTok{)}
\CommentTok{# 28 variables}

\KeywordTok{write.csv}\NormalTok{(rec4_top_cat, }\StringTok{"rec4_top_cat99.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\section{Rec4 -- Do the same for
subcategories}\label{rec4-do-the-same-for-subcategories}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df4_subcat <-}\StringTok{ }\NormalTok{df4 %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(subcat) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_ESU =} \KeywordTok{case_when}\NormalTok{(ESU >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{ESU ==}\StringTok{ }\KeywordTok{max}\NormalTok{(ESU) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_MFS =} \KeywordTok{case_when}\NormalTok{(MFS >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{MFS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(MFS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_IMN =} \KeywordTok{case_when}\NormalTok{(IMN >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{IMN ==}\StringTok{ }\KeywordTok{max}\NormalTok{(IMN) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_UPS =} \KeywordTok{case_when}\NormalTok{(UPS>}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{UPS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(UPS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{ }\KeywordTok{rowwise}\NormalTok{() %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sum_subcat =} \KeywordTok{sum}\NormalTok{(subcat_ESU, subcat_MFS, subcat_IMN, subcat_UPS, }\DataTypeTok{na.rm =} \NormalTok{T))}

\CommentTok{#rec4 variables that represents the highest uRho in at least one  subcategory: }
\KeywordTok{colSums}\NormalTok{(df4_subcat[,}\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## subcat_ESU subcat_MFS subcat_IMN subcat_UPS 
##         46         35         11          8
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#subcat_ESU    subcat_MFS   subcat_IMN  subcat_UPS }
\CommentTok{#         46           35           11           8 }


\NormalTok{rec4_top_subcat <-}\StringTok{ }\NormalTok{df4_subcat %>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(sum_subcat >}\StringTok{ }\DecValTok{0}\NormalTok{)}
\CommentTok{# 70 variables}

\KeywordTok{write.csv}\NormalTok{(rec4_top_subcat, }\StringTok{"rec4_top_subcat99.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{Rec 5 -- Create df with only those variables x offset that
represent the highest rho for at least one of the spatial components
(ESU or one of the three
MPGs)}\label{rec-5-create-df-with-only-those-variables-x-offset-that-represent-the-highest-rho-for-at-least-one-of-the-spatial-components-esu-or-one-of-the-three-mpgs}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df5_cat <-}\StringTok{ }\NormalTok{df5 %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(cat) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_ESU =} \KeywordTok{case_when}\NormalTok{(ESU >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{ESU ==}\StringTok{ }\KeywordTok{max}\NormalTok{(ESU) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_MFS =} \KeywordTok{case_when}\NormalTok{(MFS >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{MFS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(MFS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_IMN =} \KeywordTok{case_when}\NormalTok{(IMN >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{IMN ==}\StringTok{ }\KeywordTok{max}\NormalTok{(IMN) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_UPS =} \KeywordTok{case_when}\NormalTok{(UPS>}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{UPS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(UPS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{ }\KeywordTok{rowwise}\NormalTok{() %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sum_cat =} \KeywordTok{sum}\NormalTok{(cat_ESU, cat_MFS, cat_IMN, cat_UPS, }\DataTypeTok{na.rm =} \NormalTok{T))}

\CommentTok{#rec4 variables that represents the highest uRho in at least one full category: }
\KeywordTok{colSums}\NormalTok{(df5_cat[,}\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## cat_ESU cat_MFS cat_IMN cat_UPS 
##      11      10      11      10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# cat_ESU cat_MFS cat_IMN cat_UPS }
\CommentTok{#     11      10      11      10 }

\NormalTok{rec5_top_cat <-}\StringTok{ }\NormalTok{df5_cat %>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(sum_cat >}\StringTok{ }\DecValTok{0}\NormalTok{)}
\CommentTok{# 35 variables}

\KeywordTok{write.csv}\NormalTok{(rec5_top_cat, }\StringTok{"rec5_top_cat99.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\section{Rec 5 -- Do the same for
subcategories}\label{rec-5-do-the-same-for-subcategories}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df5_subcat <-}\StringTok{ }\NormalTok{df5 %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(subcat) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_ESU =} \KeywordTok{case_when}\NormalTok{(ESU >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{ESU ==}\StringTok{ }\KeywordTok{max}\NormalTok{(ESU) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_MFS =} \KeywordTok{case_when}\NormalTok{(MFS >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{MFS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(MFS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_IMN =} \KeywordTok{case_when}\NormalTok{(IMN >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{IMN ==}\StringTok{ }\KeywordTok{max}\NormalTok{(IMN) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_UPS =} \KeywordTok{case_when}\NormalTok{(UPS>}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{UPS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(UPS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{ }\KeywordTok{rowwise}\NormalTok{() %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sum_subcat =} \KeywordTok{sum}\NormalTok{(subcat_ESU, subcat_MFS, subcat_IMN, subcat_UPS, }\DataTypeTok{na.rm =} \NormalTok{T))}

\CommentTok{#rec5 variables that represents the highest uRho in at least one  subcategory: }
\KeywordTok{colSums}\NormalTok{(df5_subcat[,}\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## subcat_ESU subcat_MFS subcat_IMN subcat_UPS 
##         54         48         37         38
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# subcat_ESU subcat_MFS subcat_IMN subcat_UPS }
\CommentTok{#        54         48         37         38 }

\NormalTok{rec5_top_subcat <-}\StringTok{ }\NormalTok{df5_subcat %>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(sum_subcat >}\StringTok{ }\DecValTok{0}\NormalTok{)}
\CommentTok{# 107 variables}

\KeywordTok{write.csv}\NormalTok{(rec5_top_subcat, }\StringTok{"rec5_top_subcat99.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{Figure out how many of those variable by offset combos are
shared vs
unique}\label{figure-out-how-many-of-those-variable-by-offset-combos-are-shared-vs-unique}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cat4 <-}\StringTok{ }\NormalTok{rec4_top_cat$FP}
\NormalTok{scat4 <-}\StringTok{ }\NormalTok{rec4_top_subcat$FP}
\NormalTok{cat5 <-}\StringTok{ }\NormalTok{rec5_top_cat$FP}
\NormalTok{scat5 <-}\StringTok{ }\NormalTok{rec5_top_subcat$FP}

\KeywordTok{intersect}\NormalTok{(cat4,scat4) }\CommentTok{# 21 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "csl.Dmales6.2"        "csl.Dpups.0"          "flow.mean.2"         
##  [4] "harv.CRsport.4"       "hatch.SNAK.2"         "hatch.SNAK.3"        
##  [7] "hatch.total.2"        "npgo.spr.2"           "npgo.win.3"          
## [10] "npgo.yravg.3"         "npgo.yrsum.2"         "orca.DNRKW.4"        
## [13] "orca.DSEAK.4"         "orca.SRKWbirthsJKL.4" "orca.SRKWdeathsJKL.5"
## [16] "pdo.sum.2"            "ssl.bonn.2"           "ssl.COL.2"           
## [19] "ssl.rookORraw.5"      "upw.tdmi.4"           "upw.tdmi.5"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(cat4,cat5) }\CommentTok{# 6 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "arc.spr.2"            "npgo.spr.2"           "orca.SRKWdeathsJKL.5"
## [4] "pdo.sum.2"            "ssl.COL.2"            "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(cat4,scat5) }\CommentTok{# 12 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "csl.Dpups.0"          "harv.CRsport.4"       "hatch.SNAK.3"        
##  [4] "npgo.spr.2"           "npgo.yrsum.2"         "orca.DNRKW.4"        
##  [7] "orca.SRKWbirthsJKL.4" "orca.SRKWdeathsJKL.5" "pdo.sum.2"           
## [10] "ssl.COL.2"            "ssl.rookORraw.5"      "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(scat4,cat5) }\CommentTok{# 13 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "csl.haulout.4"        "csl.pups.-5"          "harv.NBC.4"          
##  [4] "harv.ORWA.4"          "harv.ORWAsport.5"     "hatch.all.1"         
##  [7] "hatch.spring.3"       "npgo.spr.2"           "orca.SRKWdeathsJKL.5"
## [10] "pdo.sum.2"            "ssl.COL.2"            "upw.lusi.5"          
## [13] "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(scat4,scat5) }\CommentTok{# 47 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "csl.Dmales.5"         "csl.Dpups.-2"         "csl.Dpups.0"         
##  [4] "csl.haulout.4"        "csl.males.5"          "csl.males6.4"        
##  [7] "csl.pups.-5"          "harv.CRsport.4"       "harv.NBC.4"          
## [10] "harv.ORWA.4"          "harv.ORWAsport.5"     "harv.PACtot.5"       
## [13] "harv.SEAK.5"          "harv.WCVI.5"          "hatch.all.1"         
## [16] "hatch.BC.1"           "hatch.BC.2"           "hatch.CAOR.2"        
## [19] "hatch.SNAK.3"         "hatch.spring.3"       "hatch.summer.3"      
## [22] "hatch.WAK.1"          "hatch.WAK.3"          "npgo.fal.2"          
## [25] "npgo.spr.2"           "npgo.yrsum.2"         "orca.DNRKW.4"        
## [28] "orca.DNRKW.5"         "orca.NRKW.5"          "orca.SRKWbirthsJKL.4"
## [31] "orca.SRKWdeathsJKL.5" "orca.SRKWpodJKL.4"    "orca.SRKWpodJKL.5"   
## [34] "orca.SRKWpodK.5"      "orca.SRKWpodKL.4"     "orca.SRKWpodL.4"     
## [37] "pdo.sum.2"            "ssl.COL.2"            "ssl.rookORraw.5"     
## [40] "upw.fti.3"            "upw.lusi.5"           "upw.sti.2"           
## [43] "upw.sti.4"            "upw.tdmi.4"           "upw.tumi.3"          
## [46] "upw.yr.3"             "upw.yr.5"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(cat5,scat5) }\CommentTok{# 30 in common }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "arc.win.2"            "arc.win.4"            "csl.Dpups.-4"        
##  [4] "csl.Dpups.-5"         "csl.haulout.4"        "csl.pups.-5"         
##  [7] "flow.gageht.3"        "flow.mean.3"          "flow.peak.3"         
## [10] "harv.NBC.4"           "harv.NBC.5"           "harv.ORWA.4"         
## [13] "harv.ORWAsport.5"     "hatch.all.1"          "hatch.spring.3"      
## [16] "hatch.WA.1"           "npgo.spr.2"           "npgo.spr.3"          
## [19] "npgo.win.2"           "npgo.yravg.2"         "orca.DSEAK.5"        
## [22] "orca.SRKWdeathsJKL.5" "pdo.sum.2"            "ssl.COL.2"           
## [25] "ssl.COL.3"            "ssl.rookORraw.3"      "upw.lusi.2"          
## [28] "upw.lusi.4"           "upw.lusi.5"           "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{Reduce}\NormalTok{(intersect, }\KeywordTok{list}\NormalTok{(cat4, cat5, scat4, scat5))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "npgo.spr.2"           "orca.SRKWdeathsJKL.5" "pdo.sum.2"           
## [4] "ssl.COL.2"            "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# 2 in common to all}
\CommentTok{# "npgo.spr.2" and "orca.SRKWdeathsJKL.5"}


\NormalTok{vars99 <-}\StringTok{ }\KeywordTok{list}\NormalTok{(cat4, scat4, cat5, scat5, }\DataTypeTok{names =} \KeywordTok{c}\NormalTok{(}\StringTok{"cat4"}\NormalTok{, }\StringTok{"cat5"}\NormalTok{, }\StringTok{"scat4"}\NormalTok{, }\StringTok{"scat5"}\NormalTok{))}

\KeywordTok{names}\NormalTok{(vars99) <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"cat4"}\NormalTok{, }\StringTok{"scat4"}\NormalTok{, }\StringTok{"cat5"}\NormalTok{, }\StringTok{"scat5"}\NormalTok{)}

\KeywordTok{saveRDS}\NormalTok{(vars99, }\DataTypeTok{file =} \StringTok{"vars99.rds"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{-}\label{section}

\subsection{Repeat entire procedure for 95\%
CI}\label{repeat-entire-procedure-for-95-ci}

\subsection{-}\label{section-1}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{rm}\NormalTok{(}\DataTypeTok{list =} \KeywordTok{ls}\NormalTok{())}

\KeywordTok{library}\NormalTok{(dplyr)}
\KeywordTok{library}\NormalTok{(here)}
\end{Highlighting}
\end{Shaded}

\subsection{Read in 95 data and
rename}\label{read-in-95-data-and-rename}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\KeywordTok{here}\NormalTok{(}\StringTok{"CCM_twin_95.csv"}\NormalTok{))}
\CommentTok{# 250 vars}

\CommentTok{# ensure that max will work when all values negative}
\NormalTok{df[}\KeywordTok{is.na}\NormalTok{(df)] <-}\StringTok{ }\NormalTok{-}\DecValTok{99}

\CommentTok{# split df into the rec4 and rec5 values}
\NormalTok{df4 <-}\StringTok{ }\NormalTok{df %>%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(}\DecValTok{1}\NormalTok{:}\DecValTok{8}\NormalTok{) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{rename}\NormalTok{(}
    \DataTypeTok{ESU =} \NormalTok{ESU_rec4n,}
    \DataTypeTok{IMN =} \NormalTok{Imnaha_rec4n,}
    \DataTypeTok{MFS =} \NormalTok{Middle.Fork.Salmon_rec4n, }
    \DataTypeTok{UPS =} \NormalTok{Upper.Salmon_rec4n}
  \NormalTok{)}

\NormalTok{df5 <-}\StringTok{ }\NormalTok{df %>%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(}\DecValTok{1}\NormalTok{:}\DecValTok{4}\NormalTok{, }\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{rename}\NormalTok{(}
    \DataTypeTok{ESU =} \NormalTok{ESU_rec5n,}
    \DataTypeTok{IMN =} \NormalTok{Imnaha_rec5n,}
    \DataTypeTok{MFS =} \NormalTok{Middle.Fork.Salmon_rec5n, }
    \DataTypeTok{UPS =} \NormalTok{Upper.Salmon_rec5n}
  \NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{Rec4 -- Create df with only those variables x offset that
represent the highest rho for at least one of the spatial components
(ESU or one of the three
MPGs)}\label{rec4-create-df-with-only-those-variables-x-offset-that-represent-the-highest-rho-for-at-least-one-of-the-spatial-components-esu-or-one-of-the-three-mpgs-1}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df4_cat <-}\StringTok{ }\NormalTok{df4 %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(cat) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_ESU =} \KeywordTok{case_when}\NormalTok{(ESU >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{ESU ==}\StringTok{ }\KeywordTok{max}\NormalTok{(ESU) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_MFS =} \KeywordTok{case_when}\NormalTok{(MFS >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{MFS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(MFS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_IMN =} \KeywordTok{case_when}\NormalTok{(IMN >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{IMN ==}\StringTok{ }\KeywordTok{max}\NormalTok{(IMN) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_UPS =} \KeywordTok{case_when}\NormalTok{(UPS>}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{UPS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(UPS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{ }\KeywordTok{rowwise}\NormalTok{() %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sum_cat =} \KeywordTok{sum}\NormalTok{(cat_ESU, cat_MFS, cat_IMN, cat_UPS, }\DataTypeTok{na.rm =} \NormalTok{T))}

\CommentTok{#rec4 variables that represents the highest uRho in at least one full category: }
\KeywordTok{colSums}\NormalTok{(df4_cat[,}\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## cat_ESU cat_MFS cat_IMN cat_UPS 
##      10      10      10      10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#cat_ESU cat_MFS cat_IMN cat_UPS }
\CommentTok{#     10      10      10      10 }


\NormalTok{rec4_top_cat <-}\StringTok{ }\NormalTok{df4_cat %>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(sum_cat >}\StringTok{ }\DecValTok{0}\NormalTok{)}
\CommentTok{# 35 variables}

\KeywordTok{write.csv}\NormalTok{(rec4_top_cat, }\StringTok{"rec4_top_cat95.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\section{Rec4 -- Do the same for
subcategories}\label{rec4-do-the-same-for-subcategories-1}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df4_subcat <-}\StringTok{ }\NormalTok{df4 %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(subcat) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_ESU =} \KeywordTok{case_when}\NormalTok{(ESU >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{ESU ==}\StringTok{ }\KeywordTok{max}\NormalTok{(ESU) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_MFS =} \KeywordTok{case_when}\NormalTok{(MFS >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{MFS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(MFS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_IMN =} \KeywordTok{case_when}\NormalTok{(IMN >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{IMN ==}\StringTok{ }\KeywordTok{max}\NormalTok{(IMN) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_UPS =} \KeywordTok{case_when}\NormalTok{(UPS>}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{UPS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(UPS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{ }\KeywordTok{rowwise}\NormalTok{() %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sum_subcat =} \KeywordTok{sum}\NormalTok{(subcat_ESU, subcat_MFS, subcat_IMN, subcat_UPS, }\DataTypeTok{na.rm =} \NormalTok{T))}

\CommentTok{#rec4 variables that represents the highest uRho in at least one  subcategory: }
\KeywordTok{colSums}\NormalTok{(df4_subcat[,}\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## subcat_ESU subcat_MFS subcat_IMN subcat_UPS 
##         49         43         23         20
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#subcat_ESU subcat_MFS subcat_IMN subcat_UPS }
\CommentTok{#        49         43         23         20 }


\NormalTok{rec4_top_subcat <-}\StringTok{ }\NormalTok{df4_subcat %>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(sum_subcat >}\StringTok{ }\DecValTok{0}\NormalTok{)}
\CommentTok{# 90 variables}

\KeywordTok{write.csv}\NormalTok{(rec4_top_subcat, }\StringTok{"rec4_top_subcat95.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{Rec 5 -- Create df with only those variables x offset that
represent the highest rho for at least one of the spatial components
(ESU or one of the three
MPGs)}\label{rec-5-create-df-with-only-those-variables-x-offset-that-represent-the-highest-rho-for-at-least-one-of-the-spatial-components-esu-or-one-of-the-three-mpgs-1}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df5_cat <-}\StringTok{ }\NormalTok{df5 %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(cat) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_ESU =} \KeywordTok{case_when}\NormalTok{(ESU >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{ESU ==}\StringTok{ }\KeywordTok{max}\NormalTok{(ESU) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_MFS =} \KeywordTok{case_when}\NormalTok{(MFS >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{MFS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(MFS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_IMN =} \KeywordTok{case_when}\NormalTok{(IMN >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{IMN ==}\StringTok{ }\KeywordTok{max}\NormalTok{(IMN) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{cat_UPS =} \KeywordTok{case_when}\NormalTok{(UPS>}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{UPS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(UPS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{ }\KeywordTok{rowwise}\NormalTok{() %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sum_cat =} \KeywordTok{sum}\NormalTok{(cat_ESU, cat_MFS, cat_IMN, cat_UPS, }\DataTypeTok{na.rm =} \NormalTok{T))}

\CommentTok{#rec4 variables that represents the highest uRho in at least one full category: }
\KeywordTok{colSums}\NormalTok{(df5_cat[,}\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## cat_ESU cat_MFS cat_IMN cat_UPS 
##      11      10      11      11
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# cat_ESU cat_MFS cat_IMN cat_UPS }
\CommentTok{#     11      10      11      10 }

\NormalTok{rec5_top_cat <-}\StringTok{ }\NormalTok{df5_cat %>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(sum_cat >}\StringTok{ }\DecValTok{0}\NormalTok{)}
\CommentTok{# 33 variables}

\KeywordTok{write.csv}\NormalTok{(rec5_top_cat, }\StringTok{"rec5_top_cat95.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\section{Rec 5 -- Do the same for
subcategories}\label{rec-5-do-the-same-for-subcategories-1}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df5_subcat <-}\StringTok{ }\NormalTok{df5 %>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(subcat) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_ESU =} \KeywordTok{case_when}\NormalTok{(ESU >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{ESU ==}\StringTok{ }\KeywordTok{max}\NormalTok{(ESU) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_MFS =} \KeywordTok{case_when}\NormalTok{(MFS >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{MFS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(MFS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_IMN =} \KeywordTok{case_when}\NormalTok{(IMN >}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{IMN ==}\StringTok{ }\KeywordTok{max}\NormalTok{(IMN) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{subcat_UPS =} \KeywordTok{case_when}\NormalTok{(UPS>}\StringTok{ }\DecValTok{0} \NormalTok{&}\StringTok{ }\NormalTok{UPS ==}\StringTok{ }\KeywordTok{max}\NormalTok{(UPS) ~}\StringTok{ }\DecValTok{1}\NormalTok{)) %>%}\StringTok{ }
\StringTok{  }\KeywordTok{ungroup}\NormalTok{() %>%}\StringTok{ }\KeywordTok{rowwise}\NormalTok{() %>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sum_subcat =} \KeywordTok{sum}\NormalTok{(subcat_ESU, subcat_MFS, subcat_IMN, subcat_UPS, }\DataTypeTok{na.rm =} \NormalTok{T))}

\CommentTok{#rec5 variables that represents the highest uRho in at least one  subcategory: }
\KeywordTok{colSums}\NormalTok{(df5_subcat[,}\DecValTok{9}\NormalTok{:}\DecValTok{12}\NormalTok{], }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## subcat_ESU subcat_MFS subcat_IMN subcat_UPS 
##         54         49         47         45
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# subcat_ESU subcat_MFS subcat_IMN subcat_UPS }
\CommentTok{#        54         49         47         45 }

\NormalTok{rec5_top_subcat <-}\StringTok{ }\NormalTok{df5_subcat %>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(sum_subcat >}\StringTok{ }\DecValTok{0}\NormalTok{)}
\CommentTok{# 107 variables}

\KeywordTok{write.csv}\NormalTok{(rec5_top_subcat, }\StringTok{"rec5_top_subcat95.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{Figure out how many of those variable by offset combos are
shared vs
unique}\label{figure-out-how-many-of-those-variable-by-offset-combos-are-shared-vs-unique-1}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cat4 <-}\StringTok{ }\NormalTok{rec4_top_cat$FP}
\NormalTok{scat4 <-}\StringTok{ }\NormalTok{rec4_top_subcat$FP}
\NormalTok{cat5 <-}\StringTok{ }\NormalTok{rec5_top_cat$FP}
\NormalTok{scat5 <-}\StringTok{ }\NormalTok{rec5_top_subcat$FP}

\NormalTok{vars95 <-}\StringTok{ }\KeywordTok{list}\NormalTok{(cat4, scat4, cat5, scat5)}

\KeywordTok{names}\NormalTok{(vars95) <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"cat4"}\NormalTok{, }\StringTok{"scat4"}\NormalTok{, }\StringTok{"cat5"}\NormalTok{, }\StringTok{"scat5"}\NormalTok{)}

\KeywordTok{saveRDS}\NormalTok{(vars95, }\DataTypeTok{file =} \StringTok{"vars95.rds"}\NormalTok{)}

\KeywordTok{intersect}\NormalTok{(cat4,scat4) }\CommentTok{# 26 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "csl.Dpups.-1"         "csl.Dpups.0"          "csl.males6.5"        
##  [4] "csl.pups.-5"          "flow.gageht.0"        "flow.gageht.4"       
##  [7] "flow.mean.1"          "harv.COL.4"           "harv.CRsport.4"      
## [10] "harv.PACtot.5"        "hatch.all.1"          "hatch.SNAK.3"        
## [13] "hatch.total.1"        "npgo.spr.2"           "npgo.spr.3"          
## [16] "npgo.win.3"           "npgo.yrsum.3"         "orca.DNRKW.4"        
## [19] "orca.DSEAK.4"         "orca.SRKWdeathsJKL.5" "orca.SRKWpodJKL.4"   
## [22] "ssl.COL.2"            "ssl.COL.4"            "ssl.rookORraw.4"     
## [25] "upw.tdmi.4"           "upw.tdmi.5"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(cat4,cat5) }\CommentTok{# 9 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "arc.win.2"            "hatch.all.1"          "hseal.COL.5"         
## [4] "npgo.spr.2"           "orca.SRKWdeathsJKL.5" "pdo.spr.2"           
## [7] "pdo.sum.2"            "ssl.COL.2"            "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(cat4,scat5) }\CommentTok{# 14 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "csl.pups.-5"          "flow.gageht.0"        "harv.CRsport.4"      
##  [4] "harv.PACtot.5"        "hatch.all.1"          "hatch.SNAK.3"        
##  [7] "npgo.spr.2"           "npgo.win.3"           "orca.DNRKW.4"        
## [10] "orca.SRKWdeathsJKL.5" "orca.SRKWpodJKL.4"    "pdo.sum.2"           
## [13] "ssl.COL.2"            "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(scat4,cat5) }\CommentTok{# 14 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "flow.mean.0"          "harv.ORWAsport.5"     "harv.stock.0"        
##  [4] "hatch.all.1"          "hatch.spring.3"       "hatch.total.3"       
##  [7] "npgo.spr.2"           "npgo.yravg.2"         "npgo.yrsum.2"        
## [10] "orca.DSEAK.5"         "orca.SRKWdeathsJKL.5" "ssl.COL.2"           
## [13] "upw.lusi.5"           "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(scat4,scat5) }\CommentTok{# 54 in common}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "csl.Dmales.5"         "csl.males.5"          "csl.males6.2"        
##  [4] "csl.pups.-5"          "flow.gageht.0"        "flow.mean.0"         
##  [7] "harv.CRsport.4"       "harv.NBC.4"           "harv.ORWA.4"         
## [10] "harv.ORWAsport.5"     "harv.PACtot.5"        "harv.SEAK.5"         
## [13] "harv.stock.0"         "harv.WCVI.5"          "hatch.all.1"         
## [16] "hatch.BC.1"           "hatch.CAOR.2"         "hatch.CAOR.3"        
## [19] "hatch.SAL.1"          "hatch.SNAK.3"         "hatch.spring.3"      
## [22] "hatch.summer.3"       "hatch.total.3"        "hatch.WAK.1"         
## [25] "npgo.fal.2"           "npgo.spr.2"           "npgo.win.3"          
## [28] "npgo.yravg.2"         "npgo.yravg.3"         "npgo.yrsum.2"        
## [31] "orca.DNRKW.4"         "orca.DSEAK.5"         "orca.NRKW.5"         
## [34] "orca.SRKWbirthsJKL.4" "orca.SRKWbirthsJKL.5" "orca.SRKWdeathsJKL.4"
## [37] "orca.SRKWdeathsJKL.5" "orca.SRKWpodJ.5"      "orca.SRKWpodJKL.4"   
## [40] "orca.SRKWpodJKL.5"    "orca.SRKWpodK.5"      "orca.SRKWpodKL.4"    
## [43] "orca.SRKWpodL.4"      "pdo.yr.3"             "ssl.COL.2"           
## [46] "ssl.rookORraw.2"      "ssl.rookORraw.5"      "upw.fti.3"           
## [49] "upw.lusi.5"           "upw.sti.5"            "upw.tdmi.4"          
## [52] "upw.tumi.4"           "upw.yr.3"             "upw.yr.5"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{intersect}\NormalTok{(cat5,scat5) }\CommentTok{# 27 in common }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "arc.win.4"            "csl.Dpups.-3"         "csl.Dpups.-4"        
##  [4] "csl.Dpups.-5"         "flow.gageht.3"        "flow.mean.0"         
##  [7] "flow.peak.3"          "harv.NBC.5"           "harv.ORWAsport.5"    
## [10] "harv.stock.0"         "hatch.all.1"          "hatch.spring.3"      
## [13] "hatch.total.3"        "hatch.WA.1"           "npgo.spr.2"          
## [16] "npgo.sum.2"           "npgo.yravg.2"         "npgo.yrsum.2"        
## [19] "orca.DSEAK.5"         "orca.SRKWdeathsJKL.5" "pdo.sum.2"           
## [22] "ssl.COL.2"            "ssl.COL.3"            "upw.lusi.4"          
## [25] "upw.lusi.5"           "upw.tdmi.4"           "upw.tumi.2"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{Reduce}\NormalTok{(intersect, }\KeywordTok{list}\NormalTok{(cat4, cat5, scat4, scat5))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "hatch.all.1"          "npgo.spr.2"           "orca.SRKWdeathsJKL.5"
## [4] "ssl.COL.2"            "upw.tdmi.4"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# 5 in common to all}
\CommentTok{# "hatch.all.1" + "npgo.spr.2" + "orca.SRKWdeathsJKL.5" + "ssl.COL.2" + "upw.tdmi.4"}

\KeywordTok{readRDS}\NormalTok{(}\DataTypeTok{file =} \StringTok{"vars95.rds"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## $cat4
##  [1] arc.win.2            arc.win.5            csl.Dpups.-1        
##  [4] csl.Dpups.0          csl.males6.5         csl.pups.-5         
##  [7] flow.gageht.0        flow.gageht.4        flow.mean.1         
## [10] harv.COL.4           harv.CRsport.4       harv.PACtot.5       
## [13] hatch.all.1          hatch.SNAK.3         hatch.total.1       
## [16] hseal.COL.2          hseal.COL.3          hseal.COL.5         
## [19] npgo.spr.2           npgo.spr.3           npgo.win.3          
## [22] npgo.yrsum.3         orca.DNRKW.4         orca.DSEAK.4        
## [25] orca.SRKWdeathsJKL.5 orca.SRKWpodJKL.4    pdo.spr.2           
## [28] pdo.spr.4            pdo.sum.2            pdo.sum.5           
## [31] ssl.COL.2            ssl.COL.4            ssl.rookORraw.4     
## [34] upw.tdmi.4           upw.tdmi.5          
## 250 Levels: arc.sum.2 arc.sum.3 arc.sum.4 arc.sum.5 arc.win.2 ... upw.yr.5
## 
## $scat4
##  [1] csl.Dmales.2         csl.Dmales.5         csl.Dmales6.2       
##  [4] csl.Dpups.-1         csl.Dpups.-2         csl.Dpups.0         
##  [7] csl.haulout.5        csl.males.5          csl.males6.2        
## [10] csl.males6.5         csl.pups.-5          flow.gageht.0       
## [13] flow.gageht.4        flow.mean.0          flow.mean.1         
## [16] flow.mean.4          flow.peak.2          flow.peakday.5      
## [19] harv.COL.4           harv.CRsport.4       harv.NBC.4          
## [22] harv.ORWA.4          harv.ORWAsport.5     harv.PACtot.5       
## [25] harv.SEAK.5          harv.stock.0         harv.WCVI.5         
## [28] hatch.all.1          hatch.BC.1           hatch.BC.3          
## [31] hatch.CAOR.2         hatch.CAOR.3         hatch.SAL.1         
## [34] hatch.SNAK.3         hatch.spring.1       hatch.spring.2      
## [37] hatch.spring.3       hatch.summer.3       hatch.total.1       
## [40] hatch.total.2        hatch.total.3        hatch.WA.3          
## [43] hatch.WAK.1          hatch.WAK.3          npgo.fal.2          
## [46] npgo.fal.3           npgo.spr.2           npgo.spr.3          
## [49] npgo.spr.4           npgo.sum.3           npgo.sum.4          
## [52] npgo.win.3           npgo.win.4           npgo.yravg.2        
## [55] npgo.yravg.3         npgo.yrsum.2         npgo.yrsum.3        
## [58] npgo.yrsum.4         orca.DNRKW.4         orca.DSEAK.4        
## [61] orca.DSEAK.5         orca.NRKW.5          orca.SEAK.4         
## [64] orca.SRKWbirthsJKL.4 orca.SRKWbirthsJKL.5 orca.SRKWdeathsJKL.4
## [67] orca.SRKWdeathsJKL.5 orca.SRKWpodJ.5      orca.SRKWpodJKL.4   
## [70] orca.SRKWpodJKL.5    orca.SRKWpodK.5      orca.SRKWpodKL.4    
## [73] orca.SRKWpodL.4      pdo.yr.3             ssl.bonn.2          
## [76] ssl.COL.2            ssl.COL.4            ssl.rookORraw.2     
## [79] ssl.rookORraw.4      ssl.rookORraw.5      upw.fti.3           
## [82] upw.lusi.5           upw.sti.5            upw.tdmi.4          
## [85] upw.tdmi.5           upw.tumi.3           upw.tumi.4          
## [88] upw.tumi.5           upw.yr.3             upw.yr.5            
## 250 Levels: arc.sum.2 arc.sum.3 arc.sum.4 arc.sum.5 arc.win.2 ... upw.yr.5
## 
## $cat5
##  [1] arc.sum.2            arc.win.2            arc.win.4           
##  [4] csl.Dpups.-3         csl.Dpups.-4         csl.Dpups.-5        
##  [7] flow.gageht.3        flow.mean.0          flow.peak.3         
## [10] harv.NBC.5           harv.ORWAsport.5     harv.stock.0        
## [13] hatch.all.1          hatch.spring.3       hatch.total.3       
## [16] hatch.WA.1           hseal.COL.4          hseal.COL.5         
## [19] npgo.spr.2           npgo.sum.2           npgo.yravg.2        
## [22] npgo.yrsum.2         orca.DSEAK.5         orca.SRKWdeathsJKL.5
## [25] pdo.spr.2            pdo.spr.3            pdo.sum.2           
## [28] ssl.COL.2            ssl.COL.3            upw.lusi.4          
## [31] upw.lusi.5           upw.tdmi.4           upw.tumi.2          
## 250 Levels: arc.sum.2 arc.sum.3 arc.sum.4 arc.sum.5 arc.win.2 ... upw.yr.5
## 
## $scat5
##   [1] arc.win.4            csl.bonn.2           csl.bonn.3          
##   [4] csl.bonn.4           csl.Dmales.4         csl.Dmales.5        
##   [7] csl.Dmales6.5        csl.Dpups.-3         csl.Dpups.-4        
##  [10] csl.Dpups.-5         csl.haulout.2        csl.haulout.4       
##  [13] csl.males.3          csl.males.5          csl.males6.2        
##  [16] csl.males6.4         csl.pups.-3          csl.pups.-4         
##  [19] csl.pups.-5          flow.gageht.0        flow.gageht.3       
##  [22] flow.mean.0          flow.mean.3          flow.peak.3         
##  [25] flow.peakday.3       flow.peakday.4       harv.COL.5          
##  [28] harv.CRsport.4       harv.CRsport.5       harv.NBC.4          
##  [31] harv.NBC.5           harv.ORWA.4          harv.ORWA.5         
##  [34] harv.ORWAsport.5     harv.PACtot.4        harv.PACtot.5       
##  [37] harv.SEAK.4          harv.SEAK.5          harv.stock.0        
##  [40] harv.WCVI.5          hatch.all.1          hatch.BC.1          
##  [43] hatch.BC.2           hatch.CAOR.2         hatch.CAOR.3        
##  [46] hatch.SAL.1          hatch.SAL.3          hatch.SNAK.3        
##  [49] hatch.spring.3       hatch.sum.1          hatch.summer.2      
##  [52] hatch.summer.3       hatch.total.3        hatch.WA.1          
##  [55] hatch.WA.2           hatch.WAK.1          hatch.WAK.2         
##  [58] npgo.fal.2           npgo.spr.2           npgo.sum.2          
##  [61] npgo.win.2           npgo.win.3           npgo.yravg.2        
##  [64] npgo.yravg.3         npgo.yrsum.2         orca.DNRKW.4        
##  [67] orca.DNRKW.5         orca.DSEAK.5         orca.NRKW.4         
##  [70] orca.NRKW.5          orca.SRKWbirthsJKL.4 orca.SRKWbirthsJKL.5
##  [73] orca.SRKWdeathsJKL.4 orca.SRKWdeathsJKL.5 orca.SRKWpodJ.4     
##  [76] orca.SRKWpodJ.5      orca.SRKWpodJKL.4    orca.SRKWpodJKL.5   
##  [79] orca.SRKWpodK.5      orca.SRKWpodKL.4     orca.SRKWpodL.4     
##  [82] pdo.fal.2            pdo.sum.2            pdo.yr.2            
##  [85] pdo.yr.3             ssl.bonn.4           ssl.COL.2           
##  [88] ssl.COL.3            ssl.rookORraw.2      ssl.rookORraw.3     
##  [91] ssl.rookORraw.5      upw.fal.4            upw.fti.2           
##  [94] upw.fti.3            upw.fti.4            upw.lusi.2          
##  [97] upw.lusi.4           upw.lusi.5           upw.sti.2           
## [100] upw.sti.3            upw.sti.4            upw.sti.5           
## [103] upw.tdmi.4           upw.tumi.2           upw.tumi.4          
## [106] upw.yr.3             upw.yr.5            
## 250 Levels: arc.sum.2 arc.sum.3 arc.sum.4 arc.sum.5 arc.win.2 ... upw.yr.5
\end{verbatim}


\end{document}
